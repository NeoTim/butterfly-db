<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Interface IDatabase
   | Butterfly Server .NET API Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Interface IDatabase
   | Butterfly Server .NET API Documentation ">
    <meta name="generator" content="docfx 2.46.0.0">
    
    <link rel="shortcut icon" href="../images/logo-48x48.png">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo-48x48.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Butterfly.Db.IDatabase">
  
  
  <h1 id="Butterfly_Db_IDatabase" data-uid="Butterfly.Db.IDatabase" class="text-break">Interface IDatabase
  </h1>
  <div class="markdown level0 summary">
Allows executing SELECT statements, creating transactions to execute INSERT, UPDATE, and DELETE statements; 
creating dynamic views; and receiving data change events both on tables and dynamic views.
</div>
  <div class="markdown level0 conceptual"></div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Butterfly.Db.html">Butterfly.Db</a></h6>
  <h6><strong>Assembly</strong>: Butterfly.Db.dll</h6>
  <h5 id="Butterfly_Db_IDatabase_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public interface IDatabase</code></pre>
  </div>
  <h5 id="Butterfly_Db_IDatabase_examples"><strong>Examples</strong></h5>
  
Adding records and echoing all data change events to the console...<p>
<pre><code>// Create database instance (will also read the schema from the database)
var database = new SomeDatabase();

// Listen for all database data events
var databaseListener = database.OnNewCommittedTransaction(dataEventTransaction => {
    console.WriteLine($&quot;Low Level DataEventTransaction={dataEventTransaction}&quot;);
});

// INSERT a couple of records (this will cause a single data even transaction with
// two INSERT data events to be written to the console above)
using (var transaction = database.BeginTransaction()) {
    await database.InsertAndCommitAsync(&quot;employee&quot;, values: new {
        department_id: 1,
        name: &quot;SpongeBob&quot;
    });
    await database.InsertAndCommitAsync(&quot;employee&quot;, values: new {
        department_id: 1,
        name: &quot;Squidward&quot;
    });
    await database.CommitAsync();
);</code></pre>

Creating a DynamicView and echoing data change events on the DynamicView to the console...<p>
<pre><code>// Create database instance (will also read the schema from the database)
var database = new SomeDatabase();

// Create a DynamicViewSet that print any data events to the console
// (this will immediately echo an INITIAL data event for each existing matching record)
var dynamicViewSet = database.CreateAndStartDynamicViewSet(
    &quot;SELECT * FROM employee WHERE department_id=@departmentId&quot;, 
    new {
        departmentId = 1
    },
    dataEventTransaction => {
        Console.WriteLine(dataEventTransaction);
    }
);

// This will cause the above DynamicViewSet to echo an INSERT data event
await database.InsertAndCommitAsync(&quot;employee&quot;, values: new {
    department_id: 1
    name: &quot;Mr Crabs&quot;
});

// This will NOT cause the above DynamicViewSet to echo an INSERT data event
// (because the department_id doesn&apos;t match)
await database.InsertAndCommitAsync(&quot;employee&quot;, values: new {
    department_id: 2
    name: &quot;Patrick Star&quot;
});</code></pre>

  <h3 id="properties">Properties
  </h3>
  <a id="Butterfly_Db_IDatabase_CanFieldAlias_" data-uid="Butterfly.Db.IDatabase.CanFieldAlias*"></a>
  <h4 id="Butterfly_Db_IDatabase_CanFieldAlias" data-uid="Butterfly.Db.IDatabase.CanFieldAlias">CanFieldAlias</h4>
  <div class="markdown level1 summary">
Can this database allow field aliases in SELECT statements
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">bool CanFieldAlias { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_CanJoin_" data-uid="Butterfly.Db.IDatabase.CanJoin*"></a>
  <h4 id="Butterfly_Db_IDatabase_CanJoin" data-uid="Butterfly.Db.IDatabase.CanJoin">CanJoin</h4>
  <div class="markdown level1 summary">
Can this database perform JOINs
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">bool CanJoin { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SelectCount_" data-uid="Butterfly.Db.IDatabase.SelectCount*"></a>
  <h4 id="Butterfly_Db_IDatabase_SelectCount" data-uid="Butterfly.Db.IDatabase.SelectCount">SelectCount</h4>
  <div class="markdown level1 summary">
Count of the number of SELECT statements executed
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">int SelectCount { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_TableByName_" data-uid="Butterfly.Db.IDatabase.TableByName*"></a>
  <h4 id="Butterfly_Db_IDatabase_TableByName" data-uid="Butterfly.Db.IDatabase.TableByName">TableByName</h4>
  <div class="markdown level1 summary">
Dictionary of <a class="xref" href="Butterfly.Db.Table.html">Table</a> instances keyed by name
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Dictionary&lt;string, Table&gt; TableByName { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Dictionary</span>&lt;<span class="xref">System.String</span>, <a class="xref" href="Butterfly.Db.Table.html">Table</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Butterfly_Db_IDatabase_AddInputPreprocessor_" data-uid="Butterfly.Db.IDatabase.AddInputPreprocessor*"></a>
  <h4 id="Butterfly_Db_IDatabase_AddInputPreprocessor_Action_System_String_System_Collections_Generic_Dictionary_System_String_System_Object___" data-uid="Butterfly.Db.IDatabase.AddInputPreprocessor(Action{System.String,System.Collections.Generic.Dictionary{System.String,System.Object}})">AddInputPreprocessor(Action&lt;String, System.Collections.Generic.Dictionary&lt;String, Object&gt;&gt;)</h4>
  <div class="markdown level1 summary">
Adds an input preprocessor that converts the values in the Dictionary as needed
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void AddInputPreprocessor(Action&lt;string, System.Collections.Generic.Dictionary&lt;string, object&gt;&gt; inputPreprocessor)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Action</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Collections.Generic.Dictionary</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;&gt;</td>
        <td><span class="parametername">inputPreprocessor</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_BeginTransaction_" data-uid="Butterfly.Db.IDatabase.BeginTransaction*"></a>
  <h4 id="Butterfly_Db_IDatabase_BeginTransaction" data-uid="Butterfly.Db.IDatabase.BeginTransaction">BeginTransaction()</h4>
  <div class="markdown level1 summary">
Creates a new <a class="xref" href="Butterfly.Db.ITransaction.html">ITransaction</a> instance.  An <a class="xref" href="Butterfly.Db.ITransaction.html">ITransaction</a> instance allows performing an atomic set of modifications to the database.  Must execute <a class="xref" href="Butterfly.Db.ITransaction.html#Butterfly_Db_ITransaction_CommitAsync">CommitAsync()</a> to save the transaction changes.  Disposing the transaction without committing rolls back the changes.
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">ITransaction BeginTransaction()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Butterfly.Db.ITransaction.html">ITransaction</a></td>
        <td>An <a class="xref" href="Butterfly.Db.ITransaction.html">ITransaction</a> instance (can then call InsertAsync(), UpdateAsync(), or DeleteAsync() on the ITransaction instance to make changes on the transaction)/></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_BeginTransactionAsync_" data-uid="Butterfly.Db.IDatabase.BeginTransactionAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_BeginTransactionAsync" data-uid="Butterfly.Db.IDatabase.BeginTransactionAsync">BeginTransactionAsync()</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;ITransaction&gt; BeginTransactionAsync()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<a class="xref" href="Butterfly.Db.ITransaction.html">ITransaction</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_CreateAndStartDynamicViewAsync_" data-uid="Butterfly.Db.IDatabase.CreateAndStartDynamicViewAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_CreateAndStartDynamicViewAsync_System_String_Action_Butterfly_Db_Event_DataEventTransaction__System_Object_System_String_System_String___" data-uid="Butterfly.Db.IDatabase.CreateAndStartDynamicViewAsync(System.String,Action{Butterfly.Db.Event.DataEventTransaction},System.Object,System.String,System.String[])">CreateAndStartDynamicViewAsync(String, Action&lt;DataEventTransaction&gt;, Object, String, String[])</h4>
  <div class="markdown level1 summary">
Convenience method which creates a <a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a>, adds a single <a class="xref" href="Butterfly.Db.Dynamic.DynamicView.html">DynamicView</a> to the <a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a>, and starts the <a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a>.
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;DynamicViewSet&gt; CreateAndStartDynamicViewAsync(string sql, Action&lt;DataEventTransaction&gt; listener, dynamic values = null, string name = null, string[] keyFieldNames = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">sql</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">Action</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">values</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">name</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span>[]</td>
        <td><span class="parametername">keyFieldNames</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_CreateAndStartDynamicViewAsync_" data-uid="Butterfly.Db.IDatabase.CreateAndStartDynamicViewAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_CreateAndStartDynamicViewAsync_System_String_Func_Butterfly_Db_Event_DataEventTransaction_Task__System_Object_System_String_System_String___" data-uid="Butterfly.Db.IDatabase.CreateAndStartDynamicViewAsync(System.String,Func{Butterfly.Db.Event.DataEventTransaction,Task},System.Object,System.String,System.String[])">CreateAndStartDynamicViewAsync(String, Func&lt;DataEventTransaction, Task&gt;, Object, String, String[])</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;DynamicViewSet&gt; CreateAndStartDynamicViewAsync(string sql, Func&lt;DataEventTransaction, Task&gt; listener, dynamic values = null, string name = null, string[] keyFieldNames = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">sql</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">Func</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>, <span class="xref">Task</span>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">values</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">name</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span>[]</td>
        <td><span class="parametername">keyFieldNames</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a>&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_CreateDynamicViewSet_" data-uid="Butterfly.Db.IDatabase.CreateDynamicViewSet*"></a>
  <h4 id="Butterfly_Db_IDatabase_CreateDynamicViewSet_Action_Butterfly_Db_Event_DataEventTransaction__" data-uid="Butterfly.Db.IDatabase.CreateDynamicViewSet(Action{Butterfly.Db.Event.DataEventTransaction})">CreateDynamicViewSet(Action&lt;DataEventTransaction&gt;)</h4>
  <div class="markdown level1 summary">
Allows creating a set of <a class="xref" href="Butterfly.Db.Dynamic.DynamicView.html">DynamicView</a> instances that publish a single <a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a> instance with initial data and new <a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a> instances when data changes.  The <a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a> instances are published to the lambda passed as the <code data-dev-comment-type="paramref" class="paramref">listener</code>.
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">DynamicViewSet CreateDynamicViewSet(Action&lt;DataEventTransaction&gt; listener)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Action</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td>The lambda that should receive the <a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a> instances</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a></td>
        <td>A <a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a> that can be disposed to remove all database listners</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_CreateDynamicViewSet_" data-uid="Butterfly.Db.IDatabase.CreateDynamicViewSet*"></a>
  <h4 id="Butterfly_Db_IDatabase_CreateDynamicViewSet_Func_Butterfly_Db_Event_DataEventTransaction_Task__" data-uid="Butterfly.Db.IDatabase.CreateDynamicViewSet(Func{Butterfly.Db.Event.DataEventTransaction,Task})">CreateDynamicViewSet(Func&lt;DataEventTransaction, Task&gt;)</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">DynamicViewSet CreateDynamicViewSet(Func&lt;DataEventTransaction, Task&gt; listener)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Func</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>, <span class="xref">Task</span>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Butterfly.Db.Dynamic.DynamicViewSet.html">DynamicViewSet</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_DeleteAndCommitAsync_" data-uid="Butterfly.Db.IDatabase.DeleteAndCommitAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_DeleteAndCommitAsync_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.DeleteAndCommitAsync(System.String,System.Object)">DeleteAndCommitAsync(String, Object)</h4>
  <div class="markdown level1 summary">
Executes a DELETE statement as a single transaction
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;int&gt; DeleteAndCommitAsync(string deleteStatement, dynamic vars)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">deleteStatement</span></td>
        <td>
Either a table name or a full DELETE statement with vars prefixed by @ (like <pre><code>@name</code></pre>)
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td>
Either an anonymous type or a Dictionary. 
If <code data-dev-comment-type="paramref" class="paramref">deleteStatement</code> is a table name, the <code data-dev-comment-type="paramref" class="paramref">vars</code> values will be used to build the WHERE clause of the DELETE statement.
If <code data-dev-comment-type="paramref" class="paramref">deleteStatement</code> is a full DELETE statement, there must be one entry for each var referenced in <code data-dev-comment-type="paramref" class="paramref">deleteStatement</code>.
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Int32</span>&gt;</td>
        <td>Number of records deleted</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Butterfly_Db_IDatabase_DeleteAndCommitAsync_System_String_System_Object__remarks">Remarks</h5>
  <div class="markdown level1 remarks">
Do a DELETE using the table name and an anonymous type...
<pre><code>await database.DeleteAndCommitAsync(&quot;message&quot;, new {
    id = 123
});</code></pre>
Do a DELETE using a full statement and a Dictionary...
<pre><code>await database.DeleteAndCommitAsync(&quot;DELETE FROM message WHERE id=@id&quot;, new Dictionary&lt;string, object> {
    [&quot;id&quot;] = 123
});</code></pre>
</div>
  <a id="Butterfly_Db_IDatabase_GetInitialDataEventsAsync_" data-uid="Butterfly.Db.IDatabase.GetInitialDataEventsAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_GetInitialDataEventsAsync_System_String_System_String___Butterfly_Db_SelectStatement_System_Object_" data-uid="Butterfly.Db.IDatabase.GetInitialDataEventsAsync(System.String,System.String[],Butterfly.Db.SelectStatement,System.Object)">GetInitialDataEventsAsync(String, String[], SelectStatement, Object)</h4>
  <div class="markdown level1 summary">
Executes the <code data-dev-comment-type="paramref" class="paramref">selectStatement</code> and returns the results as an array of <a class="xref" href="Butterfly.Db.Event.DataEvent.html">DataEvent</a> instances
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;DataEvent[]&gt; GetInitialDataEventsAsync(string dataEventName, string[] keyFieldNames, SelectStatement selectStatement, dynamic statementParams = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">dataEventName</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span>[]</td>
        <td><span class="parametername">keyFieldNames</span></td>
        <td></td>
      </tr>
      <tr>
        <td><a class="xref" href="Butterfly.Db.SelectStatement.html">SelectStatement</a></td>
        <td><span class="parametername">selectStatement</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">statementParams</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEvent.html">DataEvent</a>[]&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_InsertAndCommitAsync_" data-uid="Butterfly.Db.IDatabase.InsertAndCommitAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_InsertAndCommitAsync__1_System_String_System_Object_System_Boolean_" data-uid="Butterfly.Db.IDatabase.InsertAndCommitAsync``1(System.String,System.Object,System.Boolean)">InsertAndCommitAsync&lt;T&gt;(String, Object, Boolean)</h4>
  <div class="markdown level1 summary">
Executes an INSERT statement as a single transaction
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;T&gt; InsertAndCommitAsync&lt;T&gt;(string insertStatement, dynamic vars = null, bool ignoreIfDuplicate = false)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">insertStatement</span></td>
        <td>
Either a table name or a full INSERT statement with vars prefixed by @ (like <pre><code>@name</code></pre>)
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td>
Either an anonymous type or a Dictionary. 
If <code data-dev-comment-type="paramref" class="paramref">insertStatement</code> is a table name, the <code data-dev-comment-type="paramref" class="paramref">vars</code> values will be used to build the UPDATE statement.
If <code data-dev-comment-type="paramref" class="paramref">insertStatement</code> is a full INSERT statement, there must be one entry for each var referenced in <code data-dev-comment-type="paramref" class="paramref">insertStatement</code>.
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Boolean</span></td>
        <td><span class="parametername">ignoreIfDuplicate</span></td>
        <td>
If the INSERT attempts to duplicate the primary key then either 
throw an <a class="xref" href="Butterfly.Db.DuplicateKeyDatabaseException.html">DuplicateKeyDatabaseException</a> error if <code data-dev-comment-type="paramref" class="paramref">ignoreIfDuplicate</code> is true
or just ignore if <code data-dev-comment-type="paramref" class="paramref">ignoreIfDuplicate</code> is false
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;T&gt;</td>
        <td>Primary key value (semi-colon delimited string if multi-field primary key)</td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Butterfly_Db_IDatabase_InsertAndCommitAsync__1_System_String_System_Object_System_Boolean__remarks">Remarks</h5>
  <div class="markdown level1 remarks">
Do an INSERT using the table name and an anonymous type...
<pre><code>await database.InsertAndCommitAsync(&quot;message&quot;, new {
    text = &quot;Hello&quot;,
    owner_id = &quot;123&quot;,
});</code></pre>
Do an INSERT using a full statement and a Dictionary...
<pre><code>await database.InsertAndCommitAsync(&quot;INSERT INTO message (text, owner_id) VALUES (@t, @oid)&quot;, new Dictionary&lt;string, object> {
    [&quot;t&quot;] = &quot;Hello&quot;,
    [&quot;oid&quot;] = &quot;123&quot;,
});</code></pre>
</div>
  <a id="Butterfly_Db_IDatabase_OnNewCommittedTransaction_" data-uid="Butterfly.Db.IDatabase.OnNewCommittedTransaction*"></a>
  <h4 id="Butterfly_Db_IDatabase_OnNewCommittedTransaction_Action_Butterfly_Db_Event_DataEventTransaction__" data-uid="Butterfly.Db.IDatabase.OnNewCommittedTransaction(Action{Butterfly.Db.Event.DataEventTransaction})">OnNewCommittedTransaction(Action&lt;DataEventTransaction&gt;)</h4>
  <div class="markdown level1 summary">
Adds a listener that is invoked when there is a new committed transaction
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IDisposable OnNewCommittedTransaction(Action&lt;DataEventTransaction&gt; listener)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Action</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td>The lambda to call when there is a new committed <a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">IDisposable</span></td>
        <td>An <see cref="!:IDisposable"></see> that allows removing the listener by calling Dispose()</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_OnNewCommittedTransaction_" data-uid="Butterfly.Db.IDatabase.OnNewCommittedTransaction*"></a>
  <h4 id="Butterfly_Db_IDatabase_OnNewCommittedTransaction_Func_Butterfly_Db_Event_DataEventTransaction_Task__" data-uid="Butterfly.Db.IDatabase.OnNewCommittedTransaction(Func{Butterfly.Db.Event.DataEventTransaction,Task})">OnNewCommittedTransaction(Func&lt;DataEventTransaction, Task&gt;)</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IDisposable OnNewCommittedTransaction(Func&lt;DataEventTransaction, Task&gt; listener)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Func</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>, <span class="xref">Task</span>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">IDisposable</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_OnNewUncommittedTransaction_" data-uid="Butterfly.Db.IDatabase.OnNewUncommittedTransaction*"></a>
  <h4 id="Butterfly_Db_IDatabase_OnNewUncommittedTransaction_Action_Butterfly_Db_Event_DataEventTransaction__" data-uid="Butterfly.Db.IDatabase.OnNewUncommittedTransaction(Action{Butterfly.Db.Event.DataEventTransaction})">OnNewUncommittedTransaction(Action&lt;DataEventTransaction&gt;)</h4>
  <div class="markdown level1 summary">
Adds a listener that is invoked when there is a new uncommitted transaction
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IDisposable OnNewUncommittedTransaction(Action&lt;DataEventTransaction&gt; listener)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Action</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td>The lambda to call when there is a new uncommitted <a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">IDisposable</span></td>
        <td>An <see cref="!:IDisposable"></see> that allows removing the listener by calling Dispose()</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_OnNewUncommittedTransaction_" data-uid="Butterfly.Db.IDatabase.OnNewUncommittedTransaction*"></a>
  <h4 id="Butterfly_Db_IDatabase_OnNewUncommittedTransaction_Func_Butterfly_Db_Event_DataEventTransaction_Task__" data-uid="Butterfly.Db.IDatabase.OnNewUncommittedTransaction(Func{Butterfly.Db.Event.DataEventTransaction,Task})">OnNewUncommittedTransaction(Func&lt;DataEventTransaction, Task&gt;)</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">IDisposable OnNewUncommittedTransaction(Func&lt;DataEventTransaction, Task&gt; listener)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Func</span>&lt;<a class="xref" href="Butterfly.Db.Event.DataEventTransaction.html">DataEventTransaction</a>, <span class="xref">Task</span>&gt;</td>
        <td><span class="parametername">listener</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">IDisposable</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_QueryRowAsync_" data-uid="Butterfly.Db.IDatabase.QueryRowAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_QueryRowAsync_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.QueryRowAsync(System.String,System.Object)">QueryRowAsync(String, Object)</h4>
  <div class="markdown level1 summary">
Executes the stored procedure and returns a single row
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;System.Collections.Generic.Dictionary&lt;string, object&gt;&gt; QueryRowAsync(string storedProcedureName, dynamic vars = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">storedProcedureName</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Collections.Generic.Dictionary</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_QueryRowsAsync_" data-uid="Butterfly.Db.IDatabase.QueryRowsAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_QueryRowsAsync_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.QueryRowsAsync(System.String,System.Object)">QueryRowsAsync(String, Object)</h4>
  <div class="markdown level1 summary">
Executes the stored procedure and returns the rows
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;System.Collections.Generic.Dictionary&lt;string, object&gt;[]&gt; QueryRowsAsync(string storedProcedureName, dynamic vars = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">storedProcedureName</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Collections.Generic.Dictionary</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;[]&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_QueryValueAsync_" data-uid="Butterfly.Db.IDatabase.QueryValueAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_QueryValueAsync__1_System_String_System_Object___0_" data-uid="Butterfly.Db.IDatabase.QueryValueAsync``1(System.String,System.Object,``0)">QueryValueAsync&lt;T&gt;(String, Object, T)</h4>
  <div class="markdown level1 summary">
Executes the stored procedure and return a single value
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;T&gt; QueryValueAsync&lt;T&gt;(string storedProcedureName, dynamic vars = null, T defaultValue = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">storedProcedureName</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">T</span></td>
        <td><span class="parametername">defaultValue</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;T&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SelectRowAsync_" data-uid="Butterfly.Db.IDatabase.SelectRowAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_SelectRowAsync_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.SelectRowAsync(System.String,System.Object)">SelectRowAsync(String, Object)</h4>
  <div class="markdown level1 summary">
Executes the SELECT statement and return the first row (the SELECT statement may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>)
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;System.Collections.Generic.Dictionary&lt;string, object&gt;&gt; SelectRowAsync(string sql, dynamic vars = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">sql</span></td>
        <td>The SELECT statement to execute (may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>)</td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Collections.Generic.Dictionary</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SelectRowsAsync_" data-uid="Butterfly.Db.IDatabase.SelectRowsAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_SelectRowsAsync_Butterfly_Db_SelectStatement_System_Object_" data-uid="Butterfly.Db.IDatabase.SelectRowsAsync(Butterfly.Db.SelectStatement,System.Object)">SelectRowsAsync(SelectStatement, Object)</h4>
  <div class="markdown level1 summary">
Executes the SELECT statement and returns the rows
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;System.Collections.Generic.Dictionary&lt;string, object&gt;[]&gt; SelectRowsAsync(SelectStatement statement, dynamic vars)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Butterfly.Db.SelectStatement.html">SelectStatement</a></td>
        <td><span class="parametername">statement</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Collections.Generic.Dictionary</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;[]&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SelectRowsAsync_" data-uid="Butterfly.Db.IDatabase.SelectRowsAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_SelectRowsAsync_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.SelectRowsAsync(System.String,System.Object)">SelectRowsAsync(String, Object)</h4>
  <div class="markdown level1 summary">
Executes the SELECT statement and return the rows (the SELECT statement may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>)
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;System.Collections.Generic.Dictionary&lt;string, object&gt;[]&gt; SelectRowsAsync(string sql, dynamic vars = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">sql</span></td>
        <td></td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Collections.Generic.Dictionary</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;[]&gt;</td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SelectValueAsync_" data-uid="Butterfly.Db.IDatabase.SelectValueAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_SelectValueAsync__1_System_String_System_Object___0_" data-uid="Butterfly.Db.IDatabase.SelectValueAsync``1(System.String,System.Object,``0)">SelectValueAsync&lt;T&gt;(String, Object, T)</h4>
  <div class="markdown level1 summary">
Executes the SELECT statement and return the value of the first column of the first row (the SELECT statement may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>).<p>
<p>
If a var is null then references in the WHERE clause like <pre><code>name=@name</code></pre> will be rewritten as <pre><code>name IS NULL</code></pre> and references in the WHERE clause like <pre><code>name!=@name</code></pre> will be rewritten as <pre><code>name IS NOT NULL</code></pre>.<p>
<p>
If a var is an array then references in the WHERE clause like <pre><code>name=@name</code></pre> will be rewritten as <pre><code>1=2</code></pre> when the array is empty, rewritten as <pre><code>name=&apos;Bob&apos;</code></pre> when the array contains a single element &apos;Bob&apos;, and rewritten as <pre><code>name IN (&apos;Bob&apos;, &apos;Jim&apos;)</code></pre> when the array contains elements &apos;Bob&apos; and &apos;Jim&apos;.<p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;T&gt; SelectValueAsync&lt;T&gt;(string sql, dynamic vars = null, T defaultValue = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">sql</span></td>
        <td>The SELECT statement to execute (may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>)</td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td>Either an anonymous type or Dictionary with the vars used in the SELECT statement</td>
      </tr>
      <tr>
        <td><span class="xref">T</span></td>
        <td><span class="parametername">defaultValue</span></td>
        <td>The value to return if no rows were returned or the value of the first column of the first row is null</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;T&gt;</td>
        <td>The value of the first column of the first row</td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td>The return type of the single value returned</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SelectValuesAsync_" data-uid="Butterfly.Db.IDatabase.SelectValuesAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_SelectValuesAsync__1_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.SelectValuesAsync``1(System.String,System.Object)">SelectValuesAsync&lt;T&gt;(String, Object)</h4>
  <div class="markdown level1 summary">
Executes the SELECT statement and return the value of the first column of the first row (the SELECT statement may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>).<p>
<p>
If a var is null then references in the WHERE clause like <pre><code>name=@name</code></pre> will be rewritten as <pre><code>name IS NULL</code></pre> and references in the WHERE clause like <pre><code>name!=@name</code></pre> will be rewritten as <pre><code>name IS NOT NULL</code></pre>.<p>
<p>
If a var is an array then references in the WHERE clause like <pre><code>name=@name</code></pre> will be rewritten as <pre><code>1=2</code></pre> when the array is empty, rewritten as <pre><code>name=&apos;Bob&apos;</code></pre> when the array contains a single element &apos;Bob&apos;, and rewritten as <pre><code>name IN (&apos;Bob&apos;, &apos;Jim&apos;)</code></pre> when the array contains elements &apos;Bob&apos; and &apos;Jim&apos;.<p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;T[]&gt; SelectValuesAsync&lt;T&gt;(string sql, dynamic vars = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">sql</span></td>
        <td>The SELECT statement to execute (may contain vars like @name specified in <code data-dev-comment-type="paramref" class="paramref">vars</code>)</td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td>Either an anonymous type or Dictionary with the vars used in the SELECT statement</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;T[]&gt;</td>
        <td>The value of the first column of the first row</td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td>The return type of the single value returned</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SetDefaultValue_" data-uid="Butterfly.Db.IDatabase.SetDefaultValue*"></a>
  <h4 id="Butterfly_Db_IDatabase_SetDefaultValue_System_String_Func_System_String_System_Object__System_String_" data-uid="Butterfly.Db.IDatabase.SetDefaultValue(System.String,Func{System.String,System.Object},System.String)">SetDefaultValue(String, Func&lt;String, Object&gt;, String)</h4>
  <div class="markdown level1 summary">
Allows specifying a lambda that creates a default value for a field when executing an INSERT.  If <code data-dev-comment-type="paramref" class="paramref">tableName</code> is null, the <code data-dev-comment-type="paramref" class="paramref">getValue</code> lambda will be applied to all tables.
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void SetDefaultValue(string fieldName, Func&lt;string, object&gt; getValue, string tableName = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">fieldName</span></td>
        <td>Name of the field</td>
      </tr>
      <tr>
        <td><span class="xref">Func</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;</td>
        <td><span class="parametername">getValue</span></td>
        <td>The lambda that returns the default value</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">tableName</span></td>
        <td>An optional table name.  If not null, the getValue lambda is only applied to the specified table. If null, the getValue lambda is applied to all tables.</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_SetOverrideValue_" data-uid="Butterfly.Db.IDatabase.SetOverrideValue*"></a>
  <h4 id="Butterfly_Db_IDatabase_SetOverrideValue_System_String_Func_System_String_System_Object__System_String_" data-uid="Butterfly.Db.IDatabase.SetOverrideValue(System.String,Func{System.String,System.Object},System.String)">SetOverrideValue(String, Func&lt;String, Object&gt;, String)</h4>
  <div class="markdown level1 summary">
Allows specifying a lambda that creates an override value for a field when executing both an INSERT and UPDATE.  If <code data-dev-comment-type="paramref" class="paramref">tableName</code> is null, the <code data-dev-comment-type="paramref" class="paramref">getValue</code> lambda will be applied to all tables.
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void SetOverrideValue(string fieldName, Func&lt;string, object&gt; getValue, string tableName = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">fieldName</span></td>
        <td>Name of the field</td>
      </tr>
      <tr>
        <td><span class="xref">Func</span>&lt;<span class="xref">System.String</span>, <span class="xref">System.Object</span>&gt;</td>
        <td><span class="parametername">getValue</span></td>
        <td>The lambda that returns the default value</td>
      </tr>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">tableName</span></td>
        <td>An optional table name.  If not null, the getValue lambda is only applied to the specified table. If null, the getValue lambda is applied to all tables.</td>
      </tr>
    </tbody>
  </table>
  <a id="Butterfly_Db_IDatabase_UpdateAndCommitAsync_" data-uid="Butterfly.Db.IDatabase.UpdateAndCommitAsync*"></a>
  <h4 id="Butterfly_Db_IDatabase_UpdateAndCommitAsync_System_String_System_Object_" data-uid="Butterfly.Db.IDatabase.UpdateAndCommitAsync(System.String,System.Object)">UpdateAndCommitAsync(String, Object)</h4>
  <div class="markdown level1 summary">
Executes an UPDATE statement as a single transaction
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">Task&lt;int&gt; UpdateAndCommitAsync(string updateStatement, dynamic vars)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">updateStatement</span></td>
        <td>
Either a table name or a full UPDATE statement with vars prefixed by @ (like <pre><code>@name</code></pre>)
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Object</span></td>
        <td><span class="parametername">vars</span></td>
        <td>
Either an anonymous type or a Dictionary. 
If <code data-dev-comment-type="paramref" class="paramref">updateStatement</code> is a table name, the <code data-dev-comment-type="paramref" class="paramref">vars</code> values will be used to build the SET clause and WHERE clause of the UPDATE statement.
If <code data-dev-comment-type="paramref" class="paramref">updateStatement</code> is a full UPDATE statement, there must be one entry for each var referenced in <code data-dev-comment-type="paramref" class="paramref">updateStatement</code>.
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Task</span>&lt;<span class="xref">System.Int32</span>&gt;</td>
        <td>Number of records updated</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Butterfly_Db_IDatabase_UpdateAndCommitAsync_System_String_System_Object__remarks">Remarks</h5>
  <div class="markdown level1 remarks">
Do an UPDATE using the table name and an anonymous type...
<pre><code>await database.UpdateAndCommitAsync(&quot;message&quot;, new {
    id = 123,
    text = &quot;Hello&quot;,
});</code></pre>
Do an UPDATE using a full statement and a Dictionary...
<pre><code>await database.UpdateAndCommitAsync(&quot;UPDATE message SET text=@t WHERE id=@id&quot;, new Dictionary&lt;string, object> {
    [&quot;id&quot;] = 123,
    [&quot;t&quot;] = &quot;Hello&quot;,
});</code></pre>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
